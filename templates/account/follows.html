{% extends 'user_layout.html' %}


{% block user %}
<div class="page-header">
    <h1>{{ title }} {{ user.username }}</h1>
</div>
<table class="table table-hover followers">
    <thead><tr><th>User</th><th>Since</th><th>Follow</th></tr></thead>
    {% for follow in follows %}
        {% if user.username != follow.user.username %}
        <tr>
            <td>
                <a href="{{ url_for('posts.userPosts', username = follow.user.username) }}">
                    <img class="img-fluid w3-circle" style="width:10%;" src="{{ url_for('static', filename='img/' + follow.user.image_file) }}">
                    {{ follow.user.username }}
                </a>
            </td>
            <td class="">
                {{ moment(follow.timestamp).format('L') }}
            </td>
            <td>
                {% if current_user.can(Permission.FOLLOW) and follow.user != current_user %}
                    {% if not follow.user.has_role('Individual') %}
                        {% if not current_user.is_following(follow.user) %}
                            <a href="{{ url_for('main.follow', username=follow.user.username) }}" class="btn btn-primary">Follow</a>
                        {% else %}
                            <a href="{{ url_for('main.unfollow', username=follow.user.username) }}" class="btn btn-default">Unfollow</a>
                        {% endif %}   
                    {% endif %}
                {% endif %}
            </td>
        </tr>
        {% endif %}
    {% endfor %}
</table>
<div class="pagination">
    {{ macros.pagination_widget(pagination, endpoint, username = user.username) }}
</div>
{% endblock user %}